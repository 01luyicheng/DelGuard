# Changelog

所有显著的更改都将记录在此文件中。

## [1.0.0] - 2024-12-19

### 🎉 首次发布

#### ✨ 新增功能
- **跨平台安全删除**：支持Windows、macOS、Linux三大主流操作系统
- **智能回收站管理**：
  - 统一处理Windows回收站、macOS废纸篓、Linux Trash目录
  - 支持查看回收站内容、文件大小、删除时间等信息
- **文件恢复功能**：
  - 支持按名称或索引恢复文件
  - 支持批量恢复和过滤恢复
  - 支持恢复到指定位置
- **安全删除拦截**：
  - 替换系统rm/del命令
  - 删除前确认提示
  - 支持强制删除、交互式删除、预览模式
- **中文友好界面**：
  - 完整的中文操作提示和错误信息
  - 彩色终端输出
  - Unicode图标支持

#### 🛡️ 安全特性
- **权限检查**：安装脚本需要管理员权限
- **备份机制**：安装前自动备份原始命令
- **路径验证**：严格验证文件路径，防止路径遍历攻击
- **确认机制**：危险操作前提供二次确认
- **完整日志**：详细的操作日志记录

#### 🔧 技术特性
- **Go语言实现**：优秀的跨平台支持和性能
- **Cobra框架**：现代化的CLI界面
- **Viper配置**：灵活的配置文件管理
- **模块化设计**：清晰的代码结构和接口设计

#### 📦 平台支持
- **Windows**：支持Windows 10/11，x64架构
- **macOS**：支持Intel和Apple Silicon芯片
- **Linux**：支持x64和ARM64架构

#### 🚀 安装方式
- **Windows**：PowerShell一键安装脚本
- **Linux/macOS**：Bash一键安装脚本
- **手动安装**：支持手动下载和配置

#### 📖 文档
- **完整README**：详细的功能说明和使用指南
- **命令详解**：每个命令的详细用法和示例
- **安装指南**：各平台的详细安装步骤
- **安全说明**：安全特性和注意事项

#### 🎯 使用场景
- **日常文件管理**：防止误删重要文件
- **开发环境**：安全的代码文件管理
- **系统维护**：安全的系统文件操作
- **团队协作**：统一的删除操作规范

### 🔧 已知限制
- 首次安装需要管理员权限
- 大文件删除可能需要较长时间
- 网络文件系统支持有限
- 某些特殊权限文件可能无法恢复

## [1.4.1] - 2024-12-19

### 🚀 一键安装功能

#### ✨ 新增功能
- **一行命令安装**：支持Windows、Linux、macOS的一行命令安装
  - Windows: `powershell -Command "& { [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; Invoke-WebRequest -Uri 'https://raw.githubusercontent.com/01luyicheng/DelGuard/main/scripts/quick-install.ps1' -OutFile 'quick-install.ps1'; .\quick-install.ps1 }`"
- Linux/macOS: `curl -fsSL https://raw.githubusercontent.com/01luyicheng/DelGuard/main/scripts/quick-install.sh | sudo bash`
- **自动检测平台**：智能检测操作系统和架构，下载对应版本
- **版本选择**：支持指定版本安装，如 `v1.4.1`
- **强制重装**：支持强制重新安装现有版本
- **自动清理**：安装完成后自动清理临时文件

#### 🔧 安装脚本特性
- **Windows PowerShell脚本** (`quick-install.ps1`):
  - 自动检测系统架构 (x64/ARM64)
  - 管理员权限检查
  - 自动添加到系统PATH
  - 创建卸载脚本
  - 彩色输出和进度提示

- **Linux/macOS Bash脚本** (`quick-install.sh`):
  - 跨平台支持 (Ubuntu, CentOS, macOS等)
  - 自动检测系统类型和架构
  - root权限检查
  - 备份原始rm命令
  - 创建卸载脚本
  - 支持curl和wget下载

#### 📖 安装文档
- **完整安装指南**：`INSTALL.md` 提供详细安装说明
- **多平台支持**：覆盖Windows、Linux、macOS三大平台
- **故障排除**：常见问题和解决方案
- **卸载指南**：安全卸载步骤

## [1.5.2] - 2024-12-19

### 🔧 维护更新

#### 🛠️ 代码优化
- **依赖更新**：更新所有Go模块依赖到最新稳定版本
- **代理配置**：优化Go模块代理配置，支持多种代理源
- **编译优化**：修复Windows平台下的编译警告
- **版本管理**：统一版本号管理，确保各平台版本一致性

#### ✅ 质量保证
- **跨平台测试**：在Windows 11、Ubuntu 22.04、macOS Sonoma上完成测试
- **功能验证**：验证所有核心功能正常工作
- **兼容性检查**：确保与最新Go 1.21+版本兼容

#### 📦 发布改进
- **自动化构建**：完善GitHub Actions自动化构建流程
- **发布流程**：优化版本发布和标签管理流程
- **文档更新**：更新安装指南和版本说明

## [1.5.3] - 2024-12-19

### 🔧 安全修复与改进

#### 🛡️ 安全修复
- **修复日志模块变量冲突**：修复了`internal/logger/logger.go`中的变量名冲突导致的编译错误
- **增强PowerShell命令安全**：改进了Windows平台的PowerShell命令执行方式，使用更安全的参数传递机制
- **路径验证增强**：加强了对文件路径的验证，防止潜在的命令注入攻击

#### 🐛 Bug修复
- **修复编译错误**：解决了在Windows平台下的编译错误，确保项目可以正常构建
- **修复变量命名冲突**：修复了日志模块中变量名重复导致的编译问题
- **改进错误处理**：增强了错误处理的健壮性，提供更好的用户体验

#### 🔧 代码质量改进
- **代码清理**：移除了冗余代码和已弃用的方法
- **错误消息优化**：改进了错误消息的清晰度和准确性
- **文档更新**：更新了版本信息和相关文档

#### ✅ 测试验证
- **跨平台编译验证**：在Windows、Linux、macOS上验证编译成功
- **功能测试**：验证了所有核心功能的正常工作
- **安全测试**：进行了安全性检查，确保没有已知漏洞

### 🌟 后续计划
- [ ] 图形界面支持
- [ ] 网络同步功能
- [ ] 文件版本管理
- [ ] 更多平台支持
- [ ] 插件系统